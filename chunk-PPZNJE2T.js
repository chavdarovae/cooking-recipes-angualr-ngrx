import{a as K,b as Q}from"./chunk-7AJ4XDJK.js";import{a as _,f as P}from"./chunk-JKM62G2Z.js";import{a as G,b as $,c as j,d as z,e as H,f as J}from"./chunk-GFVM6BWV.js";import{$a as I,Aa as p,Ba as T,Db as q,Fa as S,Fb as B,Ga as V,Ia as N,Ja as u,L as v,La as a,Ra as R,T as y,Ua as C,Wa as U,X as c,Y as m,_a as F,_b as O,a as x,ab as g,cb as A,fa as o,la as E,mb as k,o as h,ob as D,pa as d,pb as L,rb as M,ta as b,ua as w,ya as s,za as l}from"./chunk-N7MNUTHW.js";var X=t=>[t];function Y(t,i){if(t&1){let e=N();l(0,"div",2)(1,"form",3,1)(3,"clt-input-field",4),u("onInpChanged",function(r){c(e);let f=a();return m(f.currUser.username=r)}),p(),T(4,"clt-input-field",5),l(5,"clt-input-select",6),u("onSelectChanged",function(r){c(e);let f=a();return m(f.currUser.role=r)}),p(),l(6,"div")(7,"button",7),u("click",function(){c(e);let r=a();return m(r.onSubmit(r.allowedAction))}),C(8),I(9,"titlecase"),p()()()()}if(t&2){let e=R(2),n=a();o(3),s("minLength",5)("isRequired",!0)("inpValue",n.currUser.username),o(),s("isDisabled",!0)("inpValue",n.currUser.email),o(),s("selectList",n.userRolesEnum)("inpValue",n.currUser.role)("selectEcceptions",F(12,X,n.userRolesEnum.GUEST)),o(2),s("disabled",e.invalid||!e.dirty),o(),U(" ",g(9,10,n.allowedAction)," User ")}}function Z(t,i){if(t&1&&(S(0),C(1),V()),t&2){let e=a(2).fieldName;o(),U(" ",e," is required field ")}}function ee(t,i){if(t&1&&(l(0,"div",9),d(1,Z,2,1,"ng-container",10),p()),t&2){let e=a().field;o(),s("ngIf",e==null||e.errors==null?null:e.errors.required)}}function te(t,i){if(t&1&&d(0,ee,2,1,"div",8),t&2){let e=i.field;s("ngIf",e.invalid&&!e.pristine)}}var W=class t{store=y(O);id;currUser;allowedAction;userRolesEnum=B;data$=h({user:this.store.select(P)}).pipe(v(i=>{this.currUser=i?.user?new Q(i.user):new K,this.allowedAction=this.currUser?._id?"update":"create"}));ngOnInit(){this.store.dispatch(_.getUserById({userId:this.id}))}onSubmit(i){let e=x({},this.currUser);switch(i){case"create":this.store.dispatch(_.createUser({user:e}));break;case"update":this.store.dispatch(_.updateUserById({user:e}));break}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=E({type:t,selectors:[["app-user-create"]],inputs:{id:"id"},decls:4,vars:3,consts:[["hintRef",""],["userEditForm","ngForm"],[1,"container"],[1,"form","w50","pt-30","pb-30","pl-50","pr-50"],["label","Username","modelName","usesrname","inpType","text",3,"onInpChanged","minLength","isRequired","inpValue"],["label","Email","modelName","email","inpType","text",3,"isDisabled","inpValue"],["label","Role","modelName","role",3,"onSelectChanged","selectList","inpValue","selectEcceptions"],["type","submit",1,"accent",3,"click","disabled"],["class","form__hint",4,"ngIf"],[1,"form__hint"],[4,"ngIf"]],template:function(e,n){if(e&1&&(b(0,Y,10,14,"div",2),I(1,"async"),d(2,te,1,1,"ng-template",null,0,A)),e&2){let r;w((r=g(1,1,n.data$))?0:-1,r)}},dependencies:[M,k,z,j,G,$,q,H,J,D,L],encapsulation:2})};export{W as UserCreateComponent};
