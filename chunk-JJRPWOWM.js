import{c as B}from"./chunk-7AJ4XDJK.js";import{a as f,d as D,e as N,g as R}from"./chunk-JKM62G2Z.js";import{b as Q,e as $,f as j,h as z}from"./chunk-GFVM6BWV.js";import{$a as V,Aa as r,Ab as O,Ba as C,Fb as P,Ia as g,Ja as m,La as d,T as U,Ua as s,Va as y,Wa as b,X as u,Y as _,Ya as k,Za as T,_a as x,_b as A,a as h,ab as q,ea as v,fa as o,la as E,o as w,ob as F,ta as L,ua as S,wa as I,xa as M,ya as c,za as n}from"./chunk-N7MNUTHW.js";var H=i=>[i],J=()=>["/users/create"],K=i=>["/users",i,"edit"],W=(i,t)=>t._id;function X(i,t){if(i&1){let e=g();n(0,"article",8),C(1,"i",10),n(2,"div",11)(3,"span"),s(4,"Username:"),r(),n(5,"span",12),s(6),r(),n(7,"span"),s(8,"Email:"),r(),n(9,"a",13),s(10),r(),n(11,"span"),s(12,"Role:"),r(),n(13,"span",12),s(14),r(),n(15,"div",14)(16,"button",15),m("click",function(){let a=u(e).$implicit,l=d(2);return _(l.showDeleteUserDialog(a))}),s(17," Delete "),r(),n(18,"button",16),s(19," Edit "),r()()()()}if(i&2){let e=t.$implicit;o(6),y(e.username),o(3),c("href","mailto:"+e.email,v),o(),b(" ",e.email," "),o(4),y(e.role),o(4),c("routerLink",x(5,K,e==null?null:e._id))}}function Y(i,t){i&1&&(n(0,"h5",9),s(1,"No results found!"),r())}function Z(i,t){if(i&1){let e=g();n(0,"div",0)(1,"form",2),C(2,"i",3),n(3,"clt-input-field",4),m("onInpChanged",function(a){u(e);let l=d();return l.query.search=a,_(l.onSearchQueryChange())}),r(),n(4,"clt-input-select",5),m("onSelectChanged",function(a){u(e);let l=d();return l.query.role=a,_(l.onSearchQueryChange())}),r()(),n(5,"div",6)(6,"div",7),s(7," + "),r(),I(8,X,20,7,"article",8,W,!1,Y,2,0,"h5",9),r()()}if(i&2){let e=d();o(3),c("isTypeAhead",!0)("inpValue",e.query.search??""),o(),c("selectList",e.userRolesEnum)("inpValue",e.query.role)("selectEcceptions",x(7,H,e.userRolesEnum.GUEST)),o(2),c("routerLink",T(9,J)),o(2),M(t.userList)}}var G=class i{store=U(A);data$=w({userList:this.store.select(N),isLoading:this.store.select(D),backendErrors:this.store.select(R)});query;userRolesEnum=P;showModal;currUser;ngOnInit(){this.query=new B("");let t=h({},this.query);this.store.dispatch(f.getAllUsers({query:t}))}onSearchQueryChange(){let t=h({},this.query);this.store.dispatch(f.getAllUsers({query:t}))}showDeleteUserDialog(t){this.currUser=t,this.showModal=!0}onModalClosed(t){this.showModal=!1,t&&this.currUser&&this.store.dispatch(f.deleteUser({userId:this.currUser._id}))}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-user-list"]],features:[k([Q])],decls:3,vars:4,consts:[[1,"container"],["entity","user",3,"close","show"],[1,"form","form--filter"],[1,"fa-solid","fa-magnifying-glass"],["modelName","searchString","inpType","text","placeholder","Username or Email",3,"onInpChanged","isTypeAhead","inpValue"],["modelName","role","placeholder","All roles",3,"onSelectChanged","selectList","inpValue","selectEcceptions"],[1,"card-container"],["routerLinkActive","router-link-active",1,"card-container__button","accent",3,"routerLink"],[1,"account","jumpy-card","row","row--no-wrap","gap-20"],[1,"row","row--centered","row--middle"],[1,"fa-solid","fa-user"],[1,"account__body","col","col--no-wrap","gap-10"],[1,"text-accent"],[1,"text-accent",3,"href"],[1,"row","row--no-wrap","span-2","gap-10"],[1,"danger","span-2","w100","mt-10",3,"click"],["routerLinkActive","router-link-active",1,"accent","span-2","w100","mt-10",3,"routerLink"]],template:function(e,p){if(e&1&&(L(0,Z,11,10,"div",0),V(1,"async"),n(2,"app-modal",1),m("close",function(l){return p.onModalClosed(l)}),r()),e&2){let a;S((a=q(1,2,p.data$))?0:-1,a),o(2),c("show",p.showModal)}},dependencies:[O,$,j,z,F],styles:[".card-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,390px)}.account[_ngcontent-%COMP%]{width:fit-content;box-shadow:0 4px 8px #0000001a;border-radius:8px;background-color:#fff;padding:1rem}.account[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:130px}.account[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{transform:scale(1.05)}.account__body[_ngcontent-%COMP%]{display:grid;grid-template-columns:90px 130px;justify-items:start}"]})};export{G as UserListComponent};
