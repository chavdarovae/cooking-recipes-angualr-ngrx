import{$a as P,$b as it,Aa as j,Ab as Je,B as _e,Ba as oe,C as Ie,Ca as U,D as te,Da as w,Db as k,E as xe,Ea as je,Eb as We,Gb as Xe,Ha as ie,Hb as Qe,Ia as Pe,Ib as Ze,J as N,Ka as ke,L as B,La as E,Lb as G,Mb as et,Nb as g,Ob as tt,P as f,Pb as W,R as ye,Ra as se,S as T,T as o,Ta as De,Tb as rt,U as be,Ua as S,Ub as nt,V as Ae,Va as Le,Wa as ce,X as Me,Y as Fe,Yb as ot,Za as He,_ as Oe,_a as ae,_b as D,a as c,aa as K,ab as Y,b as l,bb as le,c as At,cb as Ne,cc as u,d as ge,da as Ue,dc as st,e as V,ec as ct,fa as p,fb as J,gb as Be,hb as ue,ja as we,k as H,l as he,la as b,n as h,na as Te,nb as $e,o as ve,ob as Ge,p as Z,pa as z,pb as Ve,qb as qe,rb as Ke,s as ee,sa as Re,t as q,ta as F,tb as ze,u as v,ua as O,ub as Ye,wa as re,x as Ee,xa as ne,y as Se,ya as $,z as Ce,za as R,zb as C}from"./chunk-AIV7XYMJ.js";var A=class e{alertSubject=new V;alertSig=We(this.alertSubject.asObservable(),{initialValue:null});showAlert(t){switch(this.clearAlerts(),this.alertSubject.next(t),t.type){case"success":setTimeout(()=>this.clearAlerts(),4e3);break;case"info":case"warning":setTimeout(()=>this.clearAlerts(),5e3);break;case"danger":setTimeout(()=>this.clearAlerts(),6e3);break}}clearAlerts(){this.alertSubject.next(null)}showSuccessAlert(t,r){this.showAlert({alert:`The ${t} was successfully ${r}!`,type:"success"})}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})};function Mt(e,t){if(e&1){let r=Pe();U(0,"div",1)(1,"span"),S(2),w(),U(3,"span",2),ke("click",function(){Me(r);let i=E();return Fe(i.alertService.clearAlerts())}),w()()}if(e&2){let r,n,i=E();De("messages "+((r=i.alertService.alertSig())==null?null:r.type)),p(2),Le((n=i.alertService.alertSig())==null?null:n.alert)}}var at=class e{alertService=o(A);static \u0275fac=function(r){return new(r||e)};static \u0275cmp=b({type:e,selectors:[["rcp-alert"]],decls:1,vars:1,consts:[["data-testid","alertBox",3,"class"],["data-testid","alertBox"],["data-testid","alertBoxCloseBtn",1,"icon","fa-solid","fa-xmark",3,"click"]],template:function(r,n){r&1&&F(0,Mt,4,3,"div",0),r&2&&O(n.alertService.alertSig()?0:-1)},styles:[".messages[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:10px 20px;font-family:Roboto,sans-serif;border-radius:8px}.messages[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f5f5f5;font-size:16.8px}.messages.danger[_ngcontent-%COMP%]{background-color:#dc143c}.messages.warning[_ngcontent-%COMP%]{background-color:tomato}.messages.info[_ngcontent-%COMP%]{background-color:#00bfff}.messages.success[_ngcontent-%COMP%]{background-color:#9acd32}"],changeDetection:0})};var L=class e{_isLoading=K(!1);isLoadingSn=J(()=>this._isLoading());showLoader(){this._isLoading.set(!0)}hideLoader(){this._isLoading.set(!1)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})};function Ft(e,t){e&1&&je(0,"div",1)}function Ot(e,t){e&1&&S(0," \xA9 All rights reserved since 2025 ")}var lt=class e{loaderService=o(L);static \u0275fac=function(r){return new(r||e)};static \u0275cmp=b({type:e,selectors:[["rcp-footer"]],decls:3,vars:1,consts:[[1,"container"],[1,"loader"]],template:function(r,n){r&1&&(U(0,"div",0),F(1,Ft,1,0,"div",1)(2,Ot,1,0),w()),r&2&&(p(),O(n.loaderService.isLoadingSn()?1:2))},dependencies:[k],styles:[".container[_ngcontent-%COMP%]{font-size:12px;color:#f5f5f5}"],changeDetection:0})};var X=class e{elementRef=o(Ue);renderer=o(we);rcpIsAuthorised=ue.required();role=ue();constructor(){Be(()=>{let t=this.role()??"GUEST";this.rcpIsAuthorised().includes(t)?this.renderer.setStyle(this.elementRef.nativeElement,"display",""):this.renderer.setStyle(this.elementRef.nativeElement,"display","none")})}static \u0275fac=function(r){return new(r||e)};static \u0275dir=Te({type:e,selectors:[["","rcpIsAuthorised",""]],inputs:{rcpIsAuthorised:[1,"rcpIsAuthorised"],role:[1,"role"]}})};var s=tt({source:"authActions",events:{register:g(),registerSuccess:g(),registerFailure:g(),login:g(),loginSuccess:g(),loginFailure:g(),getOwnAccount:W(),getOwnAccountSuccess:g(),getOwnAccountFailure:g(),logout:W(),logoutSuccess:W(),logoutFailure:g()}});var Ut={isSubmitting:!1,isLoading:!1,currentUser:void 0,validatonErrors:null},wt=it({name:"auth",reducer:st(Ut,u(s.register,e=>l(c({},e),{isSubmitting:!0,validatonErrors:null})),u(s.registerSuccess,(e,t)=>l(c({},e),{isSubmitting:!1,currentUser:t.request})),u(s.registerFailure,(e,t)=>l(c({},e),{isSubmitting:!1,validatonErrors:t.errors})),u(s.login,e=>l(c({},e),{isSubmitting:!0,validatonErrors:null})),u(s.loginSuccess,(e,t)=>l(c({},e),{isSubmitting:!1,currentUser:t.request})),u(s.loginFailure,(e,t)=>l(c({},e),{isSubmitting:!1,validatonErrors:t.errors})),u(s.getOwnAccount,e=>l(c({},e),{isLoading:!0,validatonErrors:null})),u(s.getOwnAccountSuccess,(e,t)=>l(c({},e),{isLoading:!1,currentUser:t.request})),u(s.getOwnAccountFailure,(e,t)=>l(c({},e),{isLoading:!1,currentUser:null,validatonErrors:t.errors})),u(s.logout,e=>l(c({},e),{isLoading:!0,validatonErrors:null})),u(s.logoutSuccess,e=>l(c({},e),{isLoading:!1,currentUser:null})),u(s.logoutFailure,(e,t)=>l(c({},e),{isLoading:!1,validatonErrors:t.errors})),u(ct,e=>l(c({},e),{validatonErrors:null})))}),{name:zr,reducer:Yr,selectIsSubmitting:ut,selectIsLoading:Jr,selectCurrentUser:ft,selectValidatonErrors:pt}=wt;var Tt=()=>["/"],gt=e=>({item:e}),dt=(e,t)=>t.title;function Rt(e,t){e&1&&ie(0)}function jt(e,t){if(e&1&&z(0,Rt,1,0,"ng-container",9),e&2){let r=t.$implicit;E();let n=se(16);$("ngTemplateOutlet",n)("ngTemplateOutletContext",ae(2,gt,r))}}function Pt(e,t){if(e&1&&(R(0,"span"),S(1),P(2,"titlecase"),j()),e&2){let r=E();p(),ce("Hello ",Y(2,1,r.currUser.username))}}function kt(e,t){e&1&&ie(0)}function Dt(e,t){if(e&1&&z(0,kt,1,0,"ng-container",9),e&2){let r=t.$implicit;E();let n=se(16);$("ngTemplateOutlet",n)("ngTemplateOutletContext",ae(2,gt,r))}}function Lt(e,t){if(e&1&&(R(0,"button",10),S(1),P(2,"uppercase"),j()),e&2){let r=t.item,n=E();$("rcpIsAuthorised",r.roles)("role",n.currUser==null?null:n.currUser.role)("routerLink","/"+r.path),Re("aria-label","Navigate to section "+r.title),p(),ce(" ",Y(2,5,r.title)," ")}}function Ht(e,t){if(e&1&&(R(0,"div",1)(1,"div",2)(2,"span",3),oe(3,"img",4),j(),re(4,jt,1,4,"ng-container",null,dt),P(6,"appListFilterPipe"),R(7,"span",5)(8,"button",6),oe(9,"span",7),F(10,Pt,3,3,"span"),j(),R(11,"div",8),re(12,Dt,1,4,"ng-container",null,dt),P(14,"appListFilterPipe"),j()()()(),z(15,Lt,3,7,"ng-template",null,0,Ne)),e&2){let r=E();p(2),$("routerLink",He(8,Tt)),p(2),ne(le(6,2,r.menuItems,r.filterMenuMainMenu("account",!1))),p(6),O(t.currUser?10:-1),p(2),ne(le(14,5,r.menuItems,r.filterMenuMainMenu("account",!0)))}}var mt=class e{store=o(D);menuItems=Object.entries(Xe).map(([t,r])=>c({title:t},r));data$=ve({isSubmitting:this.store.select(ut),backendErrors:this.store.select(pt),currUser:this.store.select(ft).pipe()});filterMenuMainMenu(t,r){return n=>r?n.underMainMenu===t:n.underMainMenu!==t}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=b({type:e,selectors:[["rcp-header"]],decls:2,vars:3,consts:[["navItem",""],[1,"container"],[1,"nav"],["aria-label","Navigate to home",1,"nav__logo","mr-a",3,"routerLink"],["src","assets/img/logo.png","alt","logo"],["id","userMenuTrigger",1,"popover"],["popovertarget","userMenu",1,"nav__item","popover__trigger","row","row--no-wrap","row--left-aligned","gap-20"],[1,"fa-solid","fa-user"],["popover","","id","userMenu","anchor","userMenuTrigger",1,"popover__panel"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["popovertarget","userMenu","popovertargetaction","hide",1,"nav__item",3,"rcpIsAuthorised","role","routerLink"]],template:function(r,n){if(r&1&&(F(0,Ht,17,9),P(1,"async")),r&2){let i;O((i=Y(1,1,n.data$))?0:-1,i)}},dependencies:[Ke,$e,k,Je,X,Ge,qe,Ve,Ze],styles:[".nav[_ngcontent-%COMP%]{width:100%;height:45px;display:flex;flex-direction:row nowrap;align-items:center}.nav[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{font-size:18px;color:#f5f5f5;cursor:pointer}.nav__logo[_ngcontent-%COMP%]{height:35px;aspect-ratio:1}.nav__logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:auto;filter:invert(1)}.nav__item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px;padding:0 2rem}.nav__item[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0003;transform:scaleY(1.05)}.nav[_ngcontent-%COMP%]   .popover[_ngcontent-%COMP%], .nav[_ngcontent-%COMP%]   .popover__trigger[_ngcontent-%COMP%]{width:250px}.nav[_ngcontent-%COMP%]   .popover__panel[_ngcontent-%COMP%]{margin-top:1px;width:250px;border:none;box-shadow:0 4px 8px #0000001a}"]})};var ht=class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=b({type:e,selectors:[["app-page-not-found"]],decls:3,vars:0,consts:[[1,"container","row","row--centered","row--middle"]],template:function(r,n){r&1&&(U(0,"div",0)(1,"h2"),S(2,"Page not found"),w()())},dependencies:[k],encapsulation:2,changeDetection:0})};var vt={backendUrl:"https://cooking-recipes-restful-express.onrender.com"};var d=class e{http=o(ze);currUser=K(void 0);currUserSig=J(()=>this.currUser());currUserSotrageKey=Qe;authApiUrl=vt.backendUrl+"/api/users";constructor(){let t=JSON.parse(localStorage.getItem(this.currUserSotrageKey));this.setCurrUser(t)}getOwnAccount(){return this.http.get(this.authApiUrl+"/ownAccount")}register(t){return this.http.post(this.authApiUrl+"/register",t)}login(t){return this.http.post(this.authApiUrl+"/login",t)}logout(){return this.http.get(this.authApiUrl+"/logout")}setCurrUserAsGuest(){this.setCurrUser(null)}setCurrUser(t){this.currUser.set(t),localStorage.setItem(this.currUserSotrageKey,JSON.stringify(t))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})};var Et=class e{authService=o(d);alertSrevice=o(A);router=o(C);canActivate(){return this.authService.currUserSig()?!0:(this.router.navigateByUrl("login"),this.alertSrevice.showAlert({alert:"You are not authorised for this section. Please login!",type:"warning"}),!1)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=f({token:e,factory:e.\u0275fac,providedIn:"root"})};var kn=(e,t)=>(o(Ye).getToken()!==null&&(e=e.clone({withCredentials:!0})),t(e));var Gn=(e,t)=>{let r=o(A),n=o(d),i=o(C);return t(e).pipe(v(m=>{switch(m.status){case 400:r.showAlert({alert:m.error?.errorMsg??"Invalid information.",type:"danger"});break;case 401:n.setCurrUserAsGuest(),i.navigateByUrl("login");break;case 403:r.showAlert({alert:"You are not authorised for this section. Please login!",type:"danger"});break;case 404:i.navigateByUrl("/404");break;case 500:r.showAlert({alert:"There is a server error",type:"danger"});break}return he(()=>m)}))};var Yn=(e,t)=>{let r=o(L);return r.showLoader(),t(e).pipe(Ie(()=>{r.hideLoader()}))};var vr={};At(vr,{getOwnAccountEffect:()=>dr,loginEffect:()=>fr,logoutEffect:()=>gr,redirectEffectAfterLoginSuccess:()=>pr,redirectEffectAfterRegisterSuccess:()=>ur,redirectEffectAftergetLogoutSuccess:()=>hr,redirectEffectAftergetOwnAccountSuccess:()=>mr,registerEffect:()=>lr});var Nt={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},Q="__@ngrx/effects_create__";function I(e,t={}){let r=t.functional?e:e(),n=c(c({},Nt),t);return Object.defineProperty(r,Q,{value:n}),r}function Bt(e){return Object.getOwnPropertyNames(e).filter(n=>e[n]&&e[n].hasOwnProperty(Q)?e[n][Q].hasOwnProperty("dispatch"):!1).map(n=>{let i=e[n][Q];return c({propertyName:n},i)})}function $t(e){return Bt(e)}function St(e){return Object.getPrototypeOf(e)}function Gt(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function Ct(e){return typeof e=="function"}function Vt(e){return e.filter(Ct)}function qt(e,t,r){let n=St(e),m=!!n&&n.constructor.name!=="Object"?n.constructor.name:null,a=$t(e).map(({propertyName:M,dispatch:xt,useEffectsErrorHandler:yt})=>{let de=typeof e[M]=="function"?e[M]():e[M],me=yt?r(de,t):de;return xt===!1?me.pipe(Se()):me.pipe(xe()).pipe(h(bt=>({effect:e[M],notification:bt,propertyName:M,sourceName:m,sourceInstance:e})))});return ee(...a)}var Kt=10;function _t(e,t,r=Kt){return e.pipe(v(n=>(t&&t.handleError(n),r<=1?e:_t(e,t,r-1))))}var x=(()=>{let t=class t extends ge{constructor(n){super(),n&&(this.source=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}};t.\u0275fac=function(i){return new(i||t)(T(ot))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function y(...e){return q(t=>e.some(r=>typeof r=="string"?r===t.type:r.type===t.type))}var zt=new ye("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>_t}),Yt="@ngrx/effects/init",Jt=et(Yt);function Wt(e,t){if(e.notification.kind==="N"){let r=e.notification.value;!Xt(r)&&t.handleError(new Error(`Effect ${Qt(e)} dispatched an invalid action: ${Zt(r)}`))}}function Xt(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function Qt({propertyName:e,sourceInstance:t,sourceName:r}){let n=typeof t[e]=="function";return!!r?`"${r}.${String(e)}${n?"()":""}"`:`"${String(e)}()"`}function Zt(e){try{return JSON.stringify(e)}catch{return e}}var er="ngrxOnIdentifyEffects";function tr(e){return pe(e,er)}var rr="ngrxOnRunEffects";function nr(e){return pe(e,rr)}var or="ngrxOnInitEffects";function ir(e){return pe(e,or)}function pe(e,t){return e&&t in e&&typeof e[t]=="function"}var It=(()=>{let t=class t extends V{constructor(n,i){super(),this.errorHandler=n,this.effectsErrorHandler=i}addEffects(n){this.next(n)}toActions(){return this.pipe(te(n=>Gt(n)?St(n):n),Z(n=>n.pipe(te(sr))),Z(n=>{let i=n.pipe(_e(a=>cr(this.errorHandler,this.effectsErrorHandler)(a)),h(a=>(Wt(a,this.errorHandler),a.notification)),q(a=>a.kind==="N"&&a.value!=null),Ce()),m=n.pipe(Ee(1),q(ir),h(a=>a.ngrxOnInitEffects()));return ee(i,m)}))}};t.\u0275fac=function(i){return new(i||t)(T(Oe),T(zt))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function sr(e){return tr(e)?e.ngrxOnIdentifyEffects():""}function cr(e,t){return r=>{let n=qt(r,e,t);return nr(r)?r.ngrxOnRunEffects(n):n}}var ar=(()=>{let t=class t{get isStarted(){return!!this.effectsSubscription}constructor(n,i){this.effectSources=n,this.store=i,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};t.\u0275fac=function(i){return new(i||t)(T(It),T(D))},t.\u0275prov=f({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function lo(...e){let t=e.flat(),r=Vt(t);return be([r,Ae(()=>{o(rt),o(nt,{optional:!0});let n=o(ar),i=o(It),m=!n.isStarted;m&&n.start();for(let a of t){let M=Ct(a)?o(a):a;i.addEffects(M)}m&&o(D).dispatch(Jt())})])}var lr=I((e=o(x),t=o(d),r=o(G))=>e.pipe(y(s.register),N(({request:n})=>t.register(n).pipe(h(i=>(r.setToLocalStorage(t.currUserSotrageKey,i),s.registerSuccess({request:i}))),v(i=>H(s.registerFailure({errors:i?.error?.errors})))))),{functional:!0}),ur=I((e=o(x),t=o(C))=>e.pipe(y(s.registerSuccess),B(()=>{t.navigateByUrl("/")})),{functional:!0,dispatch:!1}),fr=I((e=o(x),t=o(d),r=o(G))=>e.pipe(y(s.login),N(({request:n})=>t.login(n).pipe(h(i=>(r.setToLocalStorage(t.currUserSotrageKey,i),s.loginSuccess({request:i}))),v(i=>H(s.loginFailure({errors:i?.error?.errors})))))),{functional:!0}),pr=I((e=o(x),t=o(C))=>e.pipe(y(s.loginSuccess),B(()=>{t.navigateByUrl("/")})),{functional:!0,dispatch:!1}),dr=I((e=o(x),t=o(d),r=o(G))=>e.pipe(y(s.getOwnAccount),N(()=>t.getOwnAccount().pipe(h(n=>(r.setToLocalStorage(t.currUserSotrageKey,n),s.getOwnAccountSuccess({request:n}))),v(n=>H(s.getOwnAccountFailure({errors:n?.error?.errors})))))),{functional:!0}),mr=I((e=o(x),t=o(C))=>e.pipe(y(s.getOwnAccountSuccess),B(()=>{t.navigateByUrl("/")})),{functional:!0,dispatch:!1}),gr=I((e=o(x),t=o(d),r=o(G))=>e.pipe(y(s.logout),N(()=>t.logout().pipe(h(()=>(r.setToLocalStorage(t.currUserSotrageKey,null),s.logoutSuccess())),v(n=>H(s.logoutFailure({errors:n?.error?.errors})))))),{functional:!0}),hr=I((e=o(x),t=o(C))=>e.pipe(y(s.logoutSuccess),B(()=>{t.navigateByUrl("login")})),{functional:!0,dispatch:!1});export{A as a,at as b,L as c,lt as d,X as e,s as f,wt as g,zr as h,Yr as i,ut as j,Jr as k,ft as l,pt as m,mt as n,ht as o,vt as p,d as q,Et as r,kn as s,Gn as t,Yn as u,I as v,x as w,y as x,lo as y,lr as z,ur as A,fr as B,pr as C,dr as D,mr as E,gr as F,hr as G,vr as H};
